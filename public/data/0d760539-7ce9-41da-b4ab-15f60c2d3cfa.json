{"cacheVersion":125,"page":{"id":"0d760539-7ce9-41da-b4ab-15f60c2d3cfa","paths":{"en":"mint/{{redirect|r1xlm6}}","default":"mint/{{redirect|r1xlm6}}"},"cmsDataSetPath":null,"workflows":[{"id":"f83434d0-eda9-4322-a28c-e5b27a2bbe8d","name":"Handle redirect parameter","actions":{"__ID_2__":{"id":"__ID_2__","name":"Check if redirect parameter exists","next":null,"type":"if","value":{"code":"wwFormulas.ifEmpty(globalContext.pageParameters['redirect'],false)","__wwtype":"f"},"branches":[{"id":"__ID_3__","value":true},{"id":null,"value":false}],"description":"Check if redirect parameter has a value","__wwdescription":"Check if redirect parameter has a value"},"__ID_3__":{"id":"__ID_3__","name":"Check redirect parameter length","next":null,"type":"if","value":{"code":"wwFormulas.textLength(globalContext.pageParameters['redirect'])>6","__wwtype":"f"},"branches":[{"id":"__ID_4__","value":true},{"id":"__ID_8__","value":false}],"description":"Determine if it's a slug (>6 digits) or MintCode (6 digits)","__wwdescription":"Determine if it's a slug (>6 digits) or MintCode (6 digits)"},"__ID_4__":{"id":"__ID_4__","args":{"table":"Drop","filters":[{"fn":"eq","value":{"code":"globalContext.pageParameters['redirect']","__wwtype":"f"},"column":"Slug","isEnabled":true}],"modifiers":{"single":true},"dataFields":["redirect_url"],"fieldsMode":"guided"},"name":"Find Drop by Slug","next":"__ID_5__","type":"f9ef41c3-1c53-4857-855b-f2f6a40b7186-select","description":"Query Drop table to find matching slug","__wwdescription":"Query Drop table to find matching slug"},"__ID_5__":{"id":"__ID_5__","name":"Check if Drop found","next":null,"type":"if","value":{"code":"return context.workflow['__ID_4__'].result && context.workflow['__ID_4__'].result.redirect_url","__wwtype":"js"},"branches":[{"id":"__ID_6__","value":true},{"id":"__ID_7__","value":false}],"description":"Check if Drop with slug was found","__wwdescription":"Check if Drop with slug was found"},"__ID_6__":{"id":"__ID_6__","mode":"path","name":"Navigate to Drop redirect URL","next":null,"path":{"code":"context.workflow['__ID_4__'].result?.['redirect_url']+\"/\"+globalContext.pageParameters['redirect']","__wwtype":"f"},"type":"change-page","queries":[],"section":"","disabled":false,"description":"Navigate to the redirect URL with original parameter","loadProgress":false,"navigateMode":"internal","openInNewTab":false,"__wwdescription":"Navigate to the redirect URL with original parameter"},"__ID_7__":{"id":"__ID_7__","name":"Drop not found","next":null,"type":"log","level":"warn","message":"Drop not found for slug","preview":{"code":"context.workflow['__ID_1__'].result","__wwtype":"f"},"description":"Log when Drop with slug is not found","__wwdescription":"Log when Drop with slug is not found"},"__ID_8__":{"id":"__ID_8__","name":"Check if exactly 6 digits","next":null,"type":"if","value":{"code":"wwFormulas.textLength(globalContext.pageParameters['redirect'])==6","__wwtype":"f"},"branches":[{"id":"__ID_9__","value":true},{"id":"__ID_13__","value":false}],"description":"Verify it's exactly 6 digits for MintCode","__wwdescription":"Verify it's exactly 6 digits for MintCode"},"__ID_9__":{"id":"__ID_9__","args":{"table":"MintCodes","filters":[{"fn":"eq","value":{"code":"globalContext.pageParameters['redirect']","__wwtype":"f"},"column":"Code","isEnabled":true}],"modifiers":{"single":true},"dataFields":["Drop"],"fieldsMode":"guided"},"name":"Find MintCode","next":"__ID_10__","type":"f9ef41c3-1c53-4857-855b-f2f6a40b7186-select","description":"Query MintCodes table to find matching code","__wwdescription":"Query MintCodes table to find matching code"},"__ID_10__":{"id":"__ID_10__","name":"Check if MintCode found","next":null,"type":"if","value":{"code":"return context.workflow['__ID_9__'].result && context.workflow['__ID_9__'].result.Drop","__wwtype":"js"},"branches":[{"id":"__ID_11__","value":true},{"id":"__ID_14__","value":false}],"description":"Check if MintCode was found","__wwdescription":"Check if MintCode was found"},"__ID_11__":{"id":"__ID_11__","args":{"table":"Drop","filters":[{"fn":"eq","value":{"code":"context.workflow['__ID_9__'].result?.['Drop']","__wwtype":"f"},"column":"DropId","isEnabled":true}],"modifiers":{"single":true},"dataFields":["redirect_url"],"fieldsMode":"guided"},"name":"Find Drop by DropId","next":"__ID_12__","type":"f9ef41c3-1c53-4857-855b-f2f6a40b7186-select","description":"Query Drop table using DropId from MintCode","__wwdescription":"Query Drop table using DropId from MintCode"},"__ID_12__":{"id":"__ID_12__","name":"Check if Drop found by DropId","next":null,"type":"if","value":{"code":"return context.workflow['__ID_11__'].result && context.workflow['__ID_11__'].result.redirect_url","__wwtype":"js"},"branches":[{"id":"__ID_15__","value":true},{"id":"__ID_16__","value":false}],"description":"Check if Drop was found using DropId","__wwdescription":"Check if Drop was found using DropId"},"__ID_13__":{"id":"__ID_13__","name":"Invalid redirect parameter","next":null,"type":"log","level":"warn","message":"Invalid redirect parameter length","preview":{"code":"context.workflow['__ID_1__'].result","__wwtype":"f"},"description":"Log when redirect parameter is not valid length","__wwdescription":"Log when redirect parameter is not valid length"},"__ID_14__":{"id":"__ID_14__","name":"MintCode not found","next":null,"type":"log","level":"warn","message":"MintCode not found","preview":{"code":"context.workflow['__ID_1__'].result","__wwtype":"f"},"description":"Log when MintCode is not found","__wwdescription":"Log when MintCode is not found"},"__ID_15__":{"id":"__ID_15__","mode":"path","name":"Navigate to MintCode Drop redirect URL","next":null,"path":{"code":"context.workflow['__ID_11__'].result?.['redirect_url']+\"/\"+globalContext.pageParameters['redirect']","__wwtype":"f"},"type":"change-page","queries":[],"disabled":false,"description":"Navigate to the redirect URL from Drop found via MintCode","loadProgress":true,"navigateMode":"internal","openInNewTab":false,"__wwdescription":"Navigate to the redirect URL from Drop found via MintCode"},"__ID_16__":{"id":"__ID_16__","name":"Drop not found by DropId","next":null,"type":"log","level":"warn","message":"Drop not found for DropId from MintCode","preview":{"code":"context.workflow['__ID_11__'].result","__wwtype":"f"},"description":"Log when Drop is not found using DropId from MintCode","__wwdescription":"Log when Drop is not found using DropId from MintCode"},"__ID_ERROR_1__":{"id":"__ID_ERROR_1__","name":"Log error","next":null,"type":"log","level":"error","message":"Error handling redirect parameter","description":"Log any errors that occur during redirect handling","__wwdescription":"Log any errors that occur during redirect handling"}},"trigger":"onload","description":"<p>Handles redirect parameter on page load. If over 6 digits, treats as slug and looks up Drop table. If exactly 6 digits, treats as MintCode and looks up through MintCodes to Drop table. Then navigates to the redirect URL with the original parameter.</p>","firstAction":"__ID_2__","firstErrorAction":"__ID_ERROR_1__"}]},"sections":{},"wwObjects":{},"collections":[],"variables":[],"workflows":[],"formulas":[],"libraryComponents":[]}